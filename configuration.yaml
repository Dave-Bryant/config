

# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

frontend:
  themes: !include_dir_merge_named themes

lovelace:
  mode: yaml

logger:
  default: info
  logs:
    custom_components.pyscript: info

discovery:
  ignore:
    - apple_tv
    - homekit
    - yamaha
    - harmony

samsungtv:
  - host: 10.0.0.130
    name: Samsung Smart TV
    turn_on_action:
      - service: wake_on_lan.send_magic_packet
        data:
          mac: "D0:D0:03:A2:D9:8E"

camera:
  - platform: foscam
    ip: 10.0.0.117
    rtsp_port: 88
    name: Front Camera
    username: !secret front_cam_user
    password: !secret front_cam_pw
  - platform: foscam
    ip: 10.0.0.121
    rtsp_port: 88
    name: Back Camera
    username: !secret back_cam_user
    password: !secret back_cam_pw

ffmpeg:

media_player:
  - platform: yamaha_musiccast
    host: 10.0.0.136

google:
  client_id: !secret google_client_id
  client_secret: !secret google_client_secret

# ios:

# device_tracker:     # using iphone
#   platform: nmap_tracker
#   home_interval: 10
#   hosts:
#     - 10.0.0.20  #wens_iphone
#     - 10.0.0.70  #davids_iphone

speedtestdotnet:

weather:
  - platform: darksky
    api_key: !secret dark_sky
    mode: daily

tplink:
  discovery: false
  switch:
    - host: 10.0.0.1
    - host: 10.0.0.95
    - host: 10.0.0.96
climate:
  - platform: sensibo
    api_key: !secret sensibo


# Spotify
spotify:
  client_id: !secret spotify_client_id
  client_secret: !secret spotify_client_secret


# Text to speech
tts:
  - platform: google_translate
    #cache: true
    #cache_dir: /config/tts
    #time_memory: 300
    #base_url: http://10.0.0.55:8123

upnp:
  local_ip: 10.0.0.55

# Tasmoto
panel_iframe:
  tasmoadmin:
    title: TasmoAdmin
    icon: mdi:lightbulb-on
    url: http://10.0.0.55:9541

sensor:
  - platform: mqtt
    state_topic: 'monitor/ground_floor/davidbluetooth'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'ground_floor_david'
  - platform: mqtt
    state_topic: 'monitor/ground_floor/wendybluetooth'
    value_template: '{{ value_json.confidence }}'
    unit_of_measurement: '%'
    name: 'ground_floor_wendy'
  - platform: min_max
    name: "david_occupancy_confidence"
    type: max
    round_digits: 0
    entity_ids:
      - sensor.ground_floor_david
  - platform: min_max
    name: "wendy_occupancy_confidence"
    type: max
    round_digits: 0
    entity_ids:
      - sensor.ground_floor_wendy
  - platform: command_line
    name: CPU Temperature
    command: "cat /sys/class/thermal/thermal_zone0/temp"
    # If errors occur, make sure configuration file is encoded as UTF-8
    unit_of_measurement: "°C"
    value_template: '{{ value | multiply(0.001) | round(1) }}'
  - platform: systemmonitor
    resources:
      - type: memory_use_percent
      - type: processor_use

  # irrigation
  - platform: template
    sensors:
      smart_irrigation_hourly_netto_precipitation:
        friendly_name: 'Smart Irrigation Netto Precipitation (updated hourly)'
        value_template: "{{state_attr('sensor.smart_irrigation_hourly_adjusted_run_time','netto_precipitation')|float}}"
        icon_template: "mdi:sprinkler-variant"
        unit_of_measurement: 'mm'
      smart_irrigation_bucket:
        friendly_name: 'Smart Irrigation Bucket'
        value_template: "{{state_attr('sensor.smart_irrigation_daily_adjusted_run_time','bucket')|float}}"
        icon_template: "mdi:sprinkler-variant"
        unit_of_measurement: 'mm'

 # A/C sensors
  - platform: template
    sensors:
      study_temp:
        friendly_name: 'Study temperature'
        unit_of_measurement: '°C'
        device_class: temperature
        value_template: "{{ state_attr('climate.study', 'current_temperature') }}"
      study_humidity:
        friendly_name: 'Study humidity'
        unit_of_measurement: '%'
        device_class: humidity
        value_template: "{{ state_attr('climate.study', 'current_humidity') }}"
      study_fan_modes:
        friendly_name: 'Study fan modes'
        value_template: "{{ state_attr('climate.study', 'fan_mode') }}"
      hollys_bedroom_temp:
        friendly_name: 'Hollys bedroom temperature'
        unit_of_measurement: '°C'
        device_class: temperature
        value_template: "{{ state_attr('climate.hollys_bedroom', 'current_temperature') }}"
      hollys_bedroom_humidity:
        friendly_name: 'Hollys bedroom humidity'
        unit_of_measurement: '%'
        device_class: humidity
        value_template: "{{ state_attr('climate.hollys_bedroom', 'current_humidity') }}"
      wendys_bedroom_temp:
        friendly_name: 'Wendys bedroom temperature'
        unit_of_measurement: '°C'
        device_class: temperature
        value_template: "{{ state_attr('climate.wendys_bedroom', 'current_temperature') }}"
      wendys_bedroom_humidity:
        friendly_name: 'Wendys bedroom humidity'
        unit_of_measurement: '%'
        device_class: humidity
        value_template: "{{ state_attr('climate.wendys_bedroom', 'current_humidity') }}"
      family_room_temp:
        friendly_name: 'Family room temperature'
        unit_of_measurement: '°C'
        device_class: temperature
        value_template: "{{ state_attr('climate.family_room', 'current_temperature') }}"
      family_room_humidity:
        friendly_name: 'Family_room humidity'
        unit_of_measurement: '%'
        device_class: humidity
        value_template: "{{ state_attr('climate.family_room', 'current_humidity') }}"

  # Weather Underground
  - platform: wundergroundpws
    api_key: !secret Weather_Underground_API_Key
    pws_id: !secret Weather_Underground_Station_ID
    monitored_conditions:
      - temp
      - precipTotal
      - pressure
      - windSpeed
      - dewpt
      - humidity
      - solarRadiation
      - precip_1d
      - precip_chance_1d
      - weather_1d


binary_sensor:
  - platform: threshold
    entity_id: sensor.study_temp
    lower: 19.0
    upper: 25.0
    hysteresis: 0.0
    name: study_temp_thres_on
  - platform: threshold
    entity_id: sensor.study_temp
    lower: 20.0
    upper: 22.5
    hysteresis: 0.0
    name: study_temp_thres_off
  - platform: threshold
    entity_id: sensor.hollys_bedroom_temp
    lower: 19.0
    upper: 24.0
    hysteresis: 0.0
    name: hollys_bedroom_temp_thres_on
  - platform: threshold
    entity_id: sensor.hollys_bedroom_temp
    lower: 20.0
    upper: 22.5
    hysteresis: 0.0
    name: hollys_bedroom_temp_thres_off


group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
